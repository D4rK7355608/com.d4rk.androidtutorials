// Import the necessary classes and libraries
import android.content.Intent
import android.os.Bundle
import android.os.Handler
import androidx.appcompat.app.AppCompatActivity

// Define MainActivity class which extends AppCompatActivity class
class MainActivity : AppCompatActivity() {
    private lateinit var binding: ActivityProgressBarBinding

    // Handler to manage UI updates
    @Suppress("DEPRECATION")
    private val handler = Handler()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityProgressBarBinding.inflate(layoutInflater)
        setContentView(binding.root)

        // Hide the progress bar initially
        binding.progressBar.hide()

        // Button click listener for horizontal progress bar download
        binding.buttonDownloadHorizontal.setOnClickListener {
            var progressStatus = 0
            Thread {
                while (progressStatus < 100) {

                    // Increment the progress status
                    progressStatus += 1
                    try {

                        // Pause the thread for a short duration
                        Thread.sleep(50)
                    } catch (e: InterruptedException) {
                        e.printStackTrace()
                    }

                   // Update the horizontal progress bar on the main thread
                    handler.post {
                        binding.progressBarHorizontal.progress = progressStatus
                    }
                }
            }.start() // Start the background thread
        }

        // Button click listener for simulated download with delay
        binding.buttonDownload.setOnClickListener {
            binding.progressBar.show() // Show the progress bar

            // Simulate download completion after 5 seconds
            handler.postDelayed({
                binding.progressBar.hide() // Hide the progress bar after the delay
            }, 5000)
        }
    }
}